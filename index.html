<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextMile ERP</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&family=Rye&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="sidebar">
        <div class="logo">
            <img src="img/logo.svg" alt="NextMile Logo" style="max-width: 150px;">
        </div>

        <nav>
            <a href="#" class="menu-item active"><i class="fa-solid fa-users"></i> –ö–õ–Ü–Ñ–ù–¢–ò</a>
            <a href="#" class="menu-item"><i class="fa-solid fa-wrench"></i> –ú–ê–ô–°–¢–ï–†–ù–Ø</a>
            <a href="#" class="menu-item"><i class="fa-solid fa-boxes-stacked"></i> –°–ö–õ–ê–î</a>
            <a href="#" class="menu-item"><i class="fa-solid fa-money-bill-wave"></i> –ö–ê–°–ê</a>
            
            <div class="nav-divider"></div>
            
            <a href="#" class="menu-item"><i class="fa-solid fa-gear"></i> –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø</a>
        </nav>
    </div>

    <div class="main-content">
        <div class="header">
            <div>
                <h1>–ë–∞–∑–∞ –ö–ª—ñ—î–Ω—Ç—ñ–≤</h1>
                <p class="text-muted">–°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ—Å–µ—Ä–≤—ñ—Å–æ–º</p>
            </div>
            <button class="btn btn-icon" onclick="loadData()" title="–û–Ω–æ–≤–∏—Ç–∏">
                <i class="fa-solid fa-rotate-right"></i>
            </button>
        </div>

        <div id="clientsList" class="grid-container"></div>

        <div id="kanbanBoard" class="kanban-container" style="display: none;">
            </div>

        <div id="warehouseView" style="display: none;">
            <div class="card fade-in">
                <div class="card-body">
            
                    <div class="warehouse-header">
                        <h2>üì¶ –°–∫–ª–∞–¥ –∑–∞–ø—á–∞—Å—Ç–∏–Ω</h2>
                        <button class="btn btn-save" onclick="document.getElementById('productModal').showModal()">
                            + –î–æ–¥–∞—Ç–∏ –¢–æ–≤–∞—Ä
                        </button>
                    </div>

                    <div class="table-wrapper">
                        <table class="styled-table">
                            <thead>
                                <tr>
                                    <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                                    <th>–ù–∞–∑–≤–∞</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
                                    <th>–ó–∞–ª–∏—à–æ–∫</th>
                                    <th>–í—Ö—ñ–¥</th>
                                    <th>–í–∏—Ö—ñ–¥</th>
                                    <th style="text-align:right">–î—ñ—ó</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody"></tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
        <div id="kasaView" style="display: none;">
            <div class="view-header">
                <h2>üí∞ –§—ñ–Ω–∞–Ω—Å–∏ —Ç–∞ –ó–∞—Ä–ø–ª–∞—Ç–∏</h2>
            </div>

            <div class="dashboard-grid">
                <div class="dash-card income">
                    <div class="dash-title">–ó–∞–≥–∞–ª—å–Ω–∏–π –û–±–æ—Ä–æ—Ç</div>
                    <div class="dash-value" id="totalRevenue">0 ‚Ç¥</div>
                    <div class="dash-sub">–†–æ–±–æ—Ç–∏ + –ó–∞–ø—á–∞—Å—Ç–∏–Ω–∏</div>
                </div>
                <div class="dash-card expense">
                    <div class="dash-title">–í–∏—Ç—Ä–∞—Ç–∏ (–ó–∞–ø—á–∞—Å—Ç–∏–Ω–∏)</div>
                    <div class="dash-value" id="totalPartsCost">0 ‚Ç¥</div>
                </div>
                <div class="dash-card profit">
                    <div class="dash-title">"–ë—Ä—É–¥–Ω–∏–π" –ü—Ä–∏–±—É—Ç–æ–∫</div>
                    <div class="dash-value" id="grossProfit">0 ‚Ç¥</div>
                    <div class="dash-sub">–ë–µ–∑ –≤–∏—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ó–ü</div>
                </div>
                <div class="dash-card salary">
                    <div class="dash-title">–§–æ–Ω–¥ –ó–∞—Ä–ø–ª–∞—Ç–∏</div>
                    <div class="dash-value" id="totalSalaryFund">0 ‚Ç¥</div>
                    <div class="dash-sub">–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ</div>
                </div>
            </div>

            <div class="card fade-in salary-section">
                <div class="card-body">
                    <h3 class="section-title">–ó–∞—Ä–ø–ª–∞—Ç–Ω–∞ –≤—ñ–¥–æ–º—ñ—Å—Ç—å</h3>
                    <div class="table-wrapper">
                        <table class="styled-table">
                            <thead>
                                <tr>
                                    <th>–ú–∞–π—Å—Ç–µ—Ä</th>
                                    <th>–ü–æ—Å–ª—É–≥</th>
                                    <th>–ì–æ–¥–∏–Ω–∏</th>
                                    <th>–ö–∞—Å–∞ —Ä–æ–±—ñ—Ç</th>
                                    <th>–ó–∞—Ä–ø–ª–∞—Ç–∞ (–ù–∞ —Ä—É–∫–∏)</th>
                                </tr>
                            </thead>
                            <tbody id="salaryTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button class="fab" onclick="document.getElementById('clientModal').showModal()">
        <i class="fa-solid fa-plus"></i>
    </button>

    <dialog id="clientModal">
        <div class="modal-header">
            <span>–ù–æ–≤–∏–π –ö–ª—ñ—î–Ω—Ç</span>
            <button class="btn-close" onclick="document.getElementById('clientModal').close()"><i class="fa-solid fa-times"></i></button>
        </div>
        <form id="addClientForm">
            <div class="modal-body">
                <div class="form-group">
                    <label>–ü–Ü–ë –ö–ª—ñ—î–Ω—Ç–∞</label>
                    <input type="text" id="newClientName" placeholder="–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è..." required>
                </div>
                <div class="form-group">
                    <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</label>
                    <input type="text" id="newClientPhone" placeholder="+380..." required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="document.getElementById('clientModal').close()">–°–ö–ê–°–£–í–ê–¢–ò</button>
                <button type="submit" class="btn-save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
        </form>
    </dialog>

    <dialog id="orderModal">
        <div class="modal-header">
            <span>–ù–æ–≤–µ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</span>
            <button class="btn-close" onclick="document.getElementById('orderModal').close()"><i class="fa-solid fa-times"></i></button>
        </div>
        <form id="addOrderForm">
            <div class="modal-body">
                <input type="hidden" id="modalClientId">
                <div class="form-group">
                    <label>–ê–≤—Ç–æ–º–æ–±—ñ–ª—å</label>
                    <input type="text" id="carModel" placeholder="BMW X5..." required>
                </div>

                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <label style="margin:0;">–í–ò–ö–û–ù–ê–ù–Ü –†–û–ë–û–¢–ò</label>
                        <button type="button" class="btn btn-icon" style="font-size: 12px; padding: 4px 10px; width: auto; height: auto;" onclick="addServiceRow()">
                            <i class="fa-solid fa-plus"></i> –î–æ–¥–∞—Ç–∏ –ø–æ—Å–ª—É–≥—É
                        </button>
                    </div>
                    <div id="services-container" style="display: flex; flex-direction: column; gap: 15px;"></div>
                </div>

                <div class="form-group spacer-top">
                    <label>–í–ê–†–¢–Ü–°–¢–¨ –ó–ê–ü–ß–ê–°–¢–ò–ù (–ì–†–ù)</label>
                    <input type="number" id="partsCost" placeholder="0" oninput="calc()">
                </div>
                <div class="form-group spacer-top">
                    <label>–ê–≤–∞–Ω—Å (–≥—Ä–Ω)</label>
                    <input type="number" id="advance" value="0" oninput="calc()">
                </div>
                <div id="liveTotal" class="total-display">–†–ê–ó–û–ú: 0 –≥—Ä–Ω</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="document.getElementById('orderModal').close()">–°–ö–ê–°–£–í–ê–¢–ò</button>
                <button type="submit" class="btn-save">–ó–ë–ï–†–ï–ì–¢–ò</button>
            </div>
        </form>
    </dialog>

    <dialog id="productModal">
        <div class="modal-header">
            <span>üì¶ –ù–æ–≤–∏–π –¢–æ–≤–∞—Ä</span>
            <button class="btn-close" onclick="document.getElementById('productModal').close()"><i class="fa-solid fa-times"></i></button>
        </div>
        <form id="addProductForm">
            <div class="modal-body">
                <div style="display: flex; gap: 15px;">
                    <div style="flex:1"><label>–ê—Ä—Ç–∏–∫—É–ª</label><input type="text" id="prodSku" placeholder="OC90" required></div>
                    <div style="flex:1"><label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><input type="text" id="prodCategory" placeholder="–§—ñ–ª—å—Ç—Ä–∏"></div>
                </div>
                
                <div class="form-group spacer-top">
                    <label>–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É</label>
                    <input type="text" id="prodName" placeholder="–§—ñ–ª—å—Ç—Ä –º–∞—Å–ª—è–Ω–∏–π..." required>
                </div>
                
                <div class="form-group spacer-top">
                    <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</label><input type="number" id="prodQty" value="1">
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 15px;">
                    <div style="flex:1">
                        <label>–¶—ñ–Ω–∞ –í—Ö—ñ–¥ (–ó–∞–∫—É–ø–∫–∞)</label>
                        <div class="input-group">
                            <input type="number" id="prodBuy" placeholder="0">
                            <select id="prodCurrency">
                                <option value="UAH" selected>‚Ç¥</option>
                                <option value="USD">$</option>
                                <option value="EUR">‚Ç¨</option>
                            </select>
                        </div>
                    </div>
                    <div style="flex:1">
                        <label>–¶—ñ–Ω–∞ –í–∏—Ö—ñ–¥ (–ü—Ä–æ–¥–∞–∂, –ì–†–ù)</label>
                        <input type="number" id="prodSell" placeholder="0" required>
                    </div>
                </div>
                </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="document.getElementById('productModal').close()">–°–ö–ê–°–£–í–ê–¢–ò</button>
                <button type="submit" class="btn-save">–î–û–î–ê–¢–ò</button>
            </div>
        </form>
    </dialog>

    <script src="script.js"></script>
</body>
</html>